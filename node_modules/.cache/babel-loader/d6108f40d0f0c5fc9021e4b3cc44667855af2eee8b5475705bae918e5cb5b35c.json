{"ast":null,"code":"import _slicedToArray from\"E:/React/internshala/carapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{APIKEY}from\"../config/API\";import Spinner from\"./Spinner\";import{useDispatch}from\"react-redux\";import{ShowLoader,HideLoader}from'../state/action-creators/index';import{AlertSuccess}from'../state/action-creators/index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ServiceRecords=function ServiceRecords(){var Dispatch=useDispatch();var location=useLocation();var params=new URLSearchParams(location.search);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),service=_useState2[0],setservice=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),car=_useState4[0],setCar=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var getDate=function getDate(){var dateObj=new Date();var month=String(dateObj.getMonth()+1).padStart(2,\"0\");var day=String(dateObj.getDate()).padStart(2,\"0\");var year=dateObj.getFullYear();return year+\"/\"+month+\"/\"+day;};var componantMount=function componantMount(){fetch(\"\".concat(APIKEY,\"/car/get/\").concat(params.get(\"id\"))).then(function(response){return response.json();}).then(function(json){setCar(json.Car);setservice(json.Car.Servicing);Dispatch(HideLoader());}).catch(function(err){console.log(err);Dispatch(HideLoader());});};var ApiCall=function ApiCall(s){Dispatch(ShowLoader());fetch(\"\".concat(APIKEY,\"/servicing/create\"),{method:\"POST\",body:JSON.stringify({carid:params.get(\"id\"),servicing_date:date,status:s}),headers:{\"Content-type\":\"application/json; charset=UTF-8\"}}).then(function(response){return response.json();}).then(function(json){componantMount();Dispatch(HideLoader());Dispatch(AlertSuccess(\"New Record inserted\"));}).catch(function(err){console.log(err);Dispatch(HideLoader());});};useEffect(function(){Dispatch(ShowLoader());setDate(getDate());componantMount();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Service Record \"}),/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Car Model : \",car.model,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"purchase Date : \",car.purchase_date]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[service.length<=0?/*#__PURE__*/_jsx(\"h6\",{children:\"Service Record not available\"}):service.map(function(car,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 my-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[\"Service Date : \",car.servicing_date]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:[\"Status : \",car.status]})]})})},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 my-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"create new service status \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"DATE : \",getDate()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){ApiCall(\"finished\");},children:\"Finished\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){ApiCall(\"unfinished\");},children:\"Unfinished\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){ApiCall(\"scheduled\");},children:\"Scheduled\"})]})]})})]})]});};export default ServiceRecords;","map":{"version":3,"names":["React","useEffect","useState","useLocation","APIKEY","Spinner","useDispatch","ShowLoader","HideLoader","AlertSuccess","ServiceRecords","Dispatch","location","params","URLSearchParams","search","service","setservice","car","setCar","date","setDate","getDate","dateObj","Date","month","String","getMonth","padStart","day","year","getFullYear","componantMount","fetch","get","then","response","json","Car","Servicing","catch","err","console","log","ApiCall","s","method","body","JSON","stringify","carid","servicing_date","status","headers","model","purchase_date","length","map","index"],"sources":["E:/React/internshala/carapp/src/componants/ServiceRecords.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { APIKEY } from \"../config/API\";\r\nimport Spinner from \"./Spinner\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {ShowLoader, HideLoader} from '../state/action-creators/index';\r\nimport { AlertSuccess } from '../state/action-creators/index'\r\n\r\nconst ServiceRecords = () => {\r\n  const Dispatch = useDispatch();\r\n\r\n  const location = useLocation();\r\n  const params = new URLSearchParams(location.search);\r\n  const [service, setservice] = useState([]);\r\n  const [car, setCar] = useState({});\r\n  const [date, setDate] = useState(\"\");\r\n\r\n  const getDate = () => {\r\n    let dateObj = new Date();\r\n    let month = String(dateObj.getMonth() + 1).padStart(2, \"0\");\r\n    let day = String(dateObj.getDate()).padStart(2, \"0\");\r\n    let year = dateObj.getFullYear();\r\n    return year + \"/\" + month + \"/\" + day;\r\n  };\r\n\r\n  const componantMount = () =>{\r\n    fetch(`${APIKEY}/car/get/${params.get(\"id\")}`)\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        setCar(json.Car);\r\n        setservice(json.Car.Servicing);\r\n        Dispatch(HideLoader());\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        Dispatch(HideLoader());\r\n      });\r\n  }\r\n\r\n  const ApiCall = (s) => {\r\n    Dispatch(ShowLoader());\r\n    fetch(`${APIKEY}/servicing/create`, {method: \"POST\",body: \r\n    JSON.stringify({\r\n      carid: params.get(\"id\"),\r\n      servicing_date: date,\r\n      status: s,\r\n    }),\r\n    headers: {\r\n      \"Content-type\": \"application/json; charset=UTF-8\",\r\n    }})\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        componantMount();\r\n        Dispatch(HideLoader());\r\n        Dispatch(AlertSuccess(\"New Record inserted\"));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        Dispatch(HideLoader());\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    Dispatch(ShowLoader());\r\n    setDate(getDate());\r\n    componantMount();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Service Record </h2>\r\n      <Spinner />\r\n      <div>\r\n        <p>\r\n          Car Model : {car.model} <br />\r\n          purchase Date : {car.purchase_date}\r\n        </p>\r\n      </div>\r\n      \r\n        <div className=\"row\">\r\n          {service.length <= 0 ? (<h6>Service Record not available</h6>) :\r\n            (\r\n              service.map((car, index) => {\r\n                return (\r\n                  <div className=\"col-md-3 my-1\" key={index}>\r\n                    <div className=\"card\">\r\n                      <div className=\"card-body\">\r\n                        <h5 className=\"card-title\">\r\n                          Service Date : {car.servicing_date}\r\n                        </h5>\r\n                        <h6 className=\"card-subtitle mb-2 text-muted\">\r\n                          Status : {car.status}\r\n                        </h6>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })\r\n            )\r\n          }\r\n          <div className=\"col-md-6 my-1\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">create new service status </h5>\r\n                <p>DATE : {getDate()}</p>\r\n              </div>\r\n              <div className=\"card-footer d-flex justify-content-between\">\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => {\r\n                    ApiCall(\"finished\");\r\n                  }}\r\n                >\r\n                  Finished\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => {\r\n                    ApiCall(\"unfinished\");\r\n                  }}\r\n                >\r\n                  Unfinished\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-primary\"\r\n                  onClick={() => {\r\n                    ApiCall(\"scheduled\");\r\n                  }}\r\n                >\r\n                  Scheduled\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>   \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceRecords;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}