{"ast":null,"code":"import _slicedToArray from\"E:/React/internshala/carapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useLocation}from\"react-router-dom\";import{APIKEY}from\"../config/API\";import Spinner from\"./Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CarDetails=function CarDetails(){var location=useLocation();var params=new URLSearchParams(location.search);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cars=_useState2[0],setcars=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),model=_useState4[0],setmodel=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),color=_useState6[0],setcolor=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),purchaseDate=_useState8[0],setPurchaseDate=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loader=_useState10[0],setLoader=_useState10[1];var componantMount=function componantMount(){setLoader(true);fetch(\"\".concat(APIKEY,\"/user/get/\").concat(params.get(\"user\"))).then(function(response){return response.json();}).then(function(json){setcars(json.User.Cars);setLoader(false);}).catch(function(err){console.log(err);setLoader(false);});};var newCar=function newCar(e){e.preventDefault();setLoader(true);fetch(\"\".concat(APIKEY,\"car/create\"),{method:\"POST\",body:JSON.stringify({model:model,color:color,ownerid:params.get(\"user\"),purchase_date:purchaseDate}),headers:{\"Content-type\":\"application/json; charset=UTF-8\"}}).then(function(response){response.json();}).then(function(response){componantMount();setLoader(false);}).catch(function(err){console.log(err);setLoader(false);});};useEffect(function(){componantMount();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"List of cars \"}),loader?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[cars.length<=0?/*#__PURE__*/_jsx(\"h6\",{className:\"mt-4 text-danger\",children:\"No data found\"}):cars.map(function(car,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 my-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:car.model}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:car.purchase_date}),/*#__PURE__*/_jsx(Link,{to:\"/service?id=\".concat(car.id),className:\"btn btn-primary\",children:\"Service Record\"})]})})},index);}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 my-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:\"ADD Cars\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){newCar(e);},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"CarModel\",children:\"Model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"CarModel\",onChange:function onChange(e){setmodel(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"CarColor\",children:\"Color\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"CarColor\",onChange:function onChange(e){setcolor(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"purchaseDate\",children:\"Purchase Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",name:\"purchaseDate\",onChange:function onChange(e){setPurchaseDate(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"form-control btn btn-primary mt-1\",children:\"ADD\"})]})})]})})})]})]});};export default CarDetails;","map":{"version":3,"names":["React","useEffect","useState","Link","useLocation","APIKEY","Spinner","CarDetails","location","params","URLSearchParams","search","cars","setcars","model","setmodel","color","setcolor","purchaseDate","setPurchaseDate","loader","setLoader","componantMount","fetch","get","then","response","json","User","Cars","catch","err","console","log","newCar","e","preventDefault","method","body","JSON","stringify","ownerid","purchase_date","headers","length","map","car","index","id","target","value"],"sources":["E:/React/internshala/carapp/src/componants/CarDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { APIKEY } from \"../config/API\";\r\nimport Spinner from \"./Spinner\";\r\nconst CarDetails = () => {\r\n  const location = useLocation();\r\n  const params = new URLSearchParams(location.search);\r\n  const [cars, setcars] = useState([]);\r\n\r\n  const [model, setmodel] = useState(\"\");\r\n  const [color, setcolor] = useState(\"\");\r\n  const [purchaseDate, setPurchaseDate] = useState(\"\");\r\n  const [loader, setLoader] = useState(false);\r\n\r\n  const componantMount = () => {\r\n    setLoader(true);\r\n    fetch(`${APIKEY}/user/get/${params.get(\"user\")}`)\r\n      .then((response) => response.json())\r\n      .then((json) => {\r\n        setcars(json.User.Cars);\r\n        setLoader(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoader(false);\r\n      });\r\n  };\r\n\r\n  const newCar = (e) => {\r\n    e.preventDefault();\r\n    setLoader(true);\r\n    fetch(`${APIKEY}car/create`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        model: model,\r\n        color: color,\r\n        ownerid: params.get(\"user\"),\r\n        purchase_date: purchaseDate,\r\n      }),\r\n      headers: { \"Content-type\": \"application/json; charset=UTF-8\" },\r\n    })\r\n      .then((response) => {\r\n        response.json();\r\n      })\r\n      .then((response) => {\r\n        componantMount();\r\n        setLoader(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoader(false);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    componantMount();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>List of cars </h2>\r\n      {loader ? (\r\n        <Spinner />\r\n      ) : (\r\n        <div className=\"row\">\r\n          {cars.length <= 0 ? (\r\n            <h6 className=\"mt-4 text-danger\">No data found</h6>\r\n          ) : (\r\n            cars.map((car, index) => {\r\n              return (\r\n                <div className=\"col-md-3 my-1\" key={index}>\r\n                  <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"card-title\">{car.model}</h5>\r\n                      <h6 className=\"card-subtitle mb-2 text-muted\">\r\n                        {car.purchase_date}\r\n                      </h6>\r\n                      <Link\r\n                        to={`/service?id=${car.id}`}\r\n                        className=\"btn btn-primary\"\r\n                      >\r\n                        Service Record\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })\r\n          )}\r\n          <div className=\"col-md-3 my-1\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h5 className=\"card-title\">ADD Cars</h5>\r\n                <h6 className=\"card-subtitle mb-2 text-muted\">\r\n                  <form\r\n                    onSubmit={(e) => {\r\n                      newCar(e);\r\n                    }}\r\n                  >\r\n                    <label htmlFor=\"CarModel\">Model</label>\r\n                    <input\r\n                      type={\"text\"}\r\n                      className=\"form-control\"\r\n                      name=\"CarModel\"\r\n                      onChange={(e) => {\r\n                        setmodel(e.target.value);\r\n                      }}\r\n                    />\r\n\r\n                    <label htmlFor=\"CarColor\">Color</label>\r\n                    <input\r\n                      type={\"text\"}\r\n                      className=\"form-control\"\r\n                      name=\"CarColor\"\r\n                      onChange={(e) => {\r\n                        setcolor(e.target.value);\r\n                      }}\r\n                    />\r\n\r\n                    <label htmlFor=\"purchaseDate\">Purchase Date</label>\r\n                    <input\r\n                      type={\"date\"}\r\n                      className=\"form-control\"\r\n                      name=\"purchaseDate\"\r\n                      onChange={(e) => {\r\n                        setPurchaseDate(e.target.value);\r\n                      }}\r\n                    />\r\n                    <button className=\"form-control btn btn-primary mt-1\">\r\n                      ADD\r\n                    </button>\r\n                  </form>\r\n                </h6>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}